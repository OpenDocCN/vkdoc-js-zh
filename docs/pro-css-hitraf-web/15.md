# 十五、附录 4：开发流程

你的开发过程指南应该和你的编码标准分开放在 wiki 上。这些过程可以(也应该)经常改变，所以需要有一个单一的授权点供团队参考。

### Igloo 冰箱零件公司的发展过程

本文件描述了我们打算在组织内使用的流程。这个过程可以从一个团队修改到另一个团队，但是这个指南应该作为新项目的基线。这份文件应该放在维基上，应该鼓励围绕改进它的讨论。每个项目都应该根据自己的目的修改文档，使其更加符合预期的过程。

开发过程跨越了从接收需求到部署到生产的时间。

#### 团队

该项目的团队定义如下:

*   项目管理人
*   服务器端开发人员 x 2
*   前端开发人员 x 2
*   测试员

#### 迭代

该项目被分成两周的冲刺(或迭代)。这个长度足够长，以避免每次冲刺的成本和时间影响，但又足够短，以对变化做出快速反应。每次迭代将在星期一开始，在之后的第二个星期五结束。在项目开始之前，我们必须已经有了业务需求和设计的列表。这些不应该改变，但它们可能会改变，这个过程就是为了适应这一点。

第一次冲刺被称为零迭代。在迭代 0 期间，任何阻碍团队执行其角色的事情都将被处理。这可能包括设置环境和构建、向工具添加用户或许可证、购买软件和硬件等等。在此迭代结束时，团队将拥有以下内容:

*   对需求的良好理解
*   代表整个项目的故事的优先列表
*   系统预期架构的概念
*   团队成员开始开发所需的一切
*   具有必要的构建脚本和调试方法的工作持续集成环境

#### 故事

在迭代 0 期间，需求将被分解成当前时态的故事，如下所示:

*   登录 web 服务存在
*   用户可以登录

每个故事都有一个验收标准，这是用来定义一个完整的故事。测试人员应该熟悉边缘情况和安全漏洞，他们会帮助解决这些问题。在这个过程中，可能会发现其他需求。非功能需求 <sup class="calibre18">1</sup> 也应该被考虑，因为故事也可能由此产生。验收标准示例如下:

*   登录 web 服务存在
    *   服务**必须**接受两个参数:用户名和密码
    *   服务**必须**忽略任何进一步的参数
    *   当用户名和密码与数据库中的条目匹配时，必须设置登录的 cookie **和用户重定向到安全页面**
    *   如果用户名和密码与数据库中的条目不匹配，用户**必须**被重定向回原始页面并显示错误

这些故事将在 JIRA 和绿漏斗中被追踪。这些故事也将按优先顺序排列。没有哪两个故事具有相同的优先级。

#### 结构和版本控制

我们将使用 SVN。我们的(前端)文件夹结构如下:

`/
    css/
            build/
                    [Build files]
            i/
                    [CSS imagery]
            [CSS files]
            all-debug.css
    i/
            [Imagery]
    js/
            [JS files]
    [HTML files]
    favicon.ico`

__________

非功能需求是那些描述系统应该如何而不是应该做什么的需求。例子包括正常运行时间、性能、可靠性和可用性。

所有的 CSS 文件都将建立在`css`文件夹中。需要多少就有多少，以使开发容易。每个 CSS 文件都将在@import 语句的`all-debug.css`中被引用。这里有一个例子:

`@charset "UTF-8";

@import url(reset.css);
@import url(main.css);`

构建脚本 <sup class="calibre18">2</sup> (在构建目录中)将手动运行，该脚本将解析该文件，连接所有引用的文件(以`@charset`为前缀)并将这些文件保存为`all-concat.css.`最后，它将使用 YUI 压缩器缩小该文件并将其保存为 all.css。在开发中，HTML 文件将指向`all-debug.css`，但在生产中，它们将指向`all.css. all-concat.css`可能对调试构建过程有用。每当一个 css 文件被提交到 SVN 时，CSS 目录上的一个 SVN 钩子将自动触发这个构建脚本。

#### 计划会议

在迭代 0 之后的每个 sprint 的开始，在上午 10 点，团队将召开一个计划会议，由项目经理主持。首先，项目经理将计算他可用的资源。我们将只需要服务器端和前端开发人员的总数。我们假设团队的每个成员每天有六个小时的工作时间来开会、回复邮件等等。我们会考虑计划的假期或休息日。我们将从这个迭代的第一天和最后一天的会议总数中减去三个小时。例如，这将为我们提供以下总数:

*   服务器端开发人员
    *   2 *(6 * 10)-3)= 114 小时
*   前端开发人员
    *   2 *(6 * 10)-3)= 114 小时

接下来，最高优先级的故事将被分解成任务。这些任务是为开发人员准备的，所以它们需要对开发人员有意义。每个任务都将被标记为服务器端或前端任务，并且每个任务都需要一个针对它的时间估计。估计值应该能被三个小时整除——如果少于三个小时，多个任务可能会合并在一起。估计应该是四舍五入。当估计任务的适当时间时，两个适当的开发人员应该进行对话，直到他们都同意估计时间，尽管团队的其他成员可能会参与讨论。任务应该(像故事一样)按优先顺序排列。以下是任务示例:

*   故事:登录 web 服务存在
    *   前端:创建 HTML—3 小时
    *   服务器端:创建服务器端表单验证—3 小时
    *   前端:创建前端表单验证—6 小时
    *   前端:创建 CSS—6 小时
    *   服务器端:设置 cookie—3 小时
    *   服务器端:根据数据库检查详细信息—6 小时
    *   服务器端:实现重定向—3 小时 <sup class="calibre18">3</sup>

__________

本书的网站上有一个构建脚本的例子。

项目经理应该根据他可用的总资源来计算。一旦对这个故事进行了评估，剩下的可用资源是 99 个前端开发小时和 99 个服务器端开发小时。这个故事及其任务现在应该在我们的工具(GreenHopper)中移动到迭代中。接下来，团队将对剩余的最高优先级的故事做同样的事情，并将继续这个过程，直到没有更多的时间可用。最后，将估计另一个故事，并将其视为项目的延伸，即我们可能无法实现这一点，但如果我们实现了，我们会实现的。

#### 站立会议

在第一次计划会议后，团队可以开始开发。每天上午 10 点会有一个站立会议，由项目经理主持。任何迟到的团队成员都会被扣分。三次标记后，该成员必须在下一次会议上购买整个团队的甜甜圈！公司代表将被鼓励参加这些会议，但不应发表意见。会议期间，每个人都将聚集在一个显示 JIRA 项目当前状态的屏幕周围。这会让你立刻清楚每个人都在做什么。项目经理应该突出任何看起来需要很长时间才能完成的任务，任何没有正在进行的任务的开发人员，并隔离任何阻碍团队完成任何工作的东西(以及创建解决这些问题的行动)。

#### 日常发展

在会议之外，开发人员应该从队列中取出优先级最高的任务，并将其标记为进行中。他们应该什么也不做，只是继续工作，直到任务完成。当它完成时，他们应该添加一个注释，让测试人员知道如何测试该任务，然后继续下一个可用的任务。

测试人员应该签署任何已完成的任务，并将其标记为完成。如果它因为某种原因没有通过测试，测试人员应该添加一个注释来解释它是如何没有通过测试的，并将它移回任务队列中。只有从事该任务的开发人员应该去做。

当一个故事的所有任务都被标记为完成时，测试人员和项目经理应该一起检查这个故事的所有验收标准。如果一切都可以接受，这个故事将被标记为完成。

在迭代过程中，sprint 中不应该有任何改变或添加。然而，只要有可能，可以将新的故事添加到 backlog 中，或者重新排列当前 sprint 之外的故事的优先级。

#### 总结会

每次冲刺的最后一天都有两次会议。首先，由项目经理主持的总结会议将在下午 3 点举行。在这个会议中，任何未完成的任务和故事都将被移回到 backlog 中，项目经理将计算出 sprint velocity。这是在之前的 sprint 中实际完成的估计工作的小时数。随着时间的推移，这个值可以用来计算实际达到的平均小时数，这将有助于在未来的迭代中进行更准确的估计。

__________

请注意，CSS 将是最后发生的事情。这是为了在过程中尽可能晚地修改设计。设计是最有可能改变的东西，虽然我们应该尽量避免这一点，但我们也应该为此做好准备。

#### 回顾

每个 sprint 最后一天的第二次会议是回顾会议，由项目经理主持。回顾的目的是讨论迭代进行得如何，出现了什么问题，以及如何解决这些问题。它也应该被用来认可任何在前一次迭代中表现良好的团队成员。如果团队实现了高速度，在可能的情况下，我们会带团队去附近的酒吧或餐厅，在那里开会作为奖励。

回顾的形式如下:

*   首先，团队(不包括项目经理)将花一分钟在便利贴上写下他们认为在前一次迭代中进展顺利的事情。
*   项目经理将仔细检查这些，把相似的项目放在一起。一堆物品越多，团队对这些特定物品的感觉就越积极。每一个都应该加以讨论，并向适当的成员表示祝贺。
*   接下来，团队(不包括项目经理)将花一分钟在便利贴上写下他们认为在前一次迭代中做得不好的事情。
*   项目经理将仔细检查它们，对于每一个项目，必须记录一个行动来解决它。每个行动必须有一个人负责执行(通常是项目经理)，并且必须在下一次回顾时完成。
*   如果流程需要改变，我们会改变！
*   最后，团队应该就所有事情的进展进行非正式的交谈。这是提出一般抱怨或与工作无关的问题的好时机，也是团队团结的好时机。

整个项目的最后一次回顾将是项目回顾。这将采取与任何其他回顾相同的形式，但是将基于整个项目，而不仅仅是前一次迭代。项目经理可能希望向比他的团队更广泛的观众展示他的发现，认可他们，并分享他们可能已经实现的对他们的过程的任何改变，这可能对整个组织有帮助。

#### 调度

下面是迭代计划的快速回顾:

*   星期一
    *   上午 10 点计划会议
*   星期二至星期五
    *   上午 10 点单口相声
*   周一至周四
    *   上午 10 点单口相声
*   星期五
    *   上午 10 点单口相声
    *   下午 3 点总结会
    *   下午 4 点回顾

#### 保修

整个过程将被重复，直到没有更多的故事，或该项目被视为完成。在这一点上，项目被发布到一个质量保证(QA)的环境中，这涉及到更深入的测试，以确保项目为发布做好准备。然后，项目立即发布到生产，并被认为是在三个月的保修期内。

最后，团队将转移到下一个项目，尽管它必须能够解决在保修期内发现的任何进一步的错误。