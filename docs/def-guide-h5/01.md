# 一、上下文中的 HTML5

超文本标记语言从 20 世纪 90 年代早期就已经出现了。我最早的接触是在 1993 年或 1994 年左右，当时我在离伦敦不远的一所大学的研究实验室工作。只有一个浏览器——NCSA Mosaic——而网络服务器的数量屈指可数。

当我回想起那些日子，我想知道为什么我们对 HTML 和万维网如此兴奋。(那时候我们必须费力地把这三个字都打出来。仅仅提及“网络”还没有达到临界质量或当前的重要性。

一切都很简单。我记得一些宝石的图片，我们可以慢慢地看着它们装载。这是在宽带革命之前，整个大学都拥有如今手机上常见的那种带宽。但是我们很兴奋。拨款申请被匆忙改写以适应新的世界，人们真切地感觉到技术世界已经分裂成了前网络时代和后网络时代，尽管我们所能做的只是在离伦敦不远的*另一所*大学里看到咖啡壶的照片(但去喝咖啡太远了)。

从那以后，对于许多用户来说，网络已经变得和互联网没有什么区别，我们早就过了对宝石图片感到兴奋的时候了。一路走来，HTML 被扩展、增强、扭曲、折磨、争夺、诉讼、忽视、拥抱、因过于简单而被诋毁，被誉为未来，并最终成为数十亿人日常生活中不可或缺的一部分。

这本书是关于 HTML5 的 HTML 标准的最新版本，并试图为一项经过多年艰难的青春期后终于成熟的关键技术带来秩序、结构和增强。

### HTML 的历史

所有的 HTML 书籍都有一个标题为*HTML 的历史*的部分，并且大多数使用这个部分来给出一个从 HTML 标准被创建到今天的时间表。

如果你需要这些信息，我鼓励你去维基百科上找——尽管它不是很有趣或有用。为了理解 HTML 是如何形成的，以及我们是如何到达 HTML5 的，我们关心一些关键的转折点和一个长期的趋势。

#### JavaScript 的引入

JavaScript(尽管名为 JavaScript，但它与 Java 编程语言关系不大)是由一家名为 Netscape 的公司开发的。它标志着嵌入 web 浏览器的客户端脚本的开始，将 HTML 从静态内容的载体转变为稍微丰富一些的东西。我说稍微丰富一点是因为我们今天在浏览器中看到的复杂交互需要一段时间才能出现。

JavaScript 不是核心 HTML 规范的一部分，但是网页浏览器、HTML 和 JavaScript 之间的联系如此紧密，以至于把它们分开是没有意义的。HTML5 规范假设 JavaScript 可用，我们需要使用 JavaScript 来使用 HTML5 中添加的一些最有趣的新功能。

#### 浏览器大战的结束

曾经有一段时间，浏览器市场竞争激烈。主要的竞争对手是微软和网景公司，这些公司通过给他们的浏览器增加独特的功能来进行竞争。这个想法是，这些功能将是如此引人注目，以至于 web 开发人员将构建他们的内容，以便它只能在特定的浏览器上工作——并且这些内容将是如此引人注目，以至于用户将更喜欢一种浏览器而不是另一种，市场主导地位将随之而来。

结果并不完全是这样。Web 开发人员最终只能使用在所有浏览器中都可用的功能，或者想出在每种浏览器中使用大致相当的功能的复杂变通方法。这是非常痛苦的，web 开发仍然带着这个时期的伤疤。

最终，微软被判违反反垄断法，因为它免费赠送了 Internet Explorer，削弱了网景公司的付费产品 Navigator。微软因网景公司倒闭而受到指责。这可能有一定的道理，但我在此期间为网景公司做了 18 个月左右的咨询，我从来没有遇到一家公司如此一心自我毁灭。有些公司注定是其他公司的榜样，网景公司就是这样一家公司。

网景的毁灭和对微软的处罚结束了浏览器大战，并为基于标准的网络浏览奠定了基础。HTML 规范得到了改进，遵守它成为了规范。如今，浏览器在遵守标准的水平上竞争——这是一个彻底的转变，让开发者和用户的生活都变得更加轻松。

#### 插件的统治地位

插件对网络来说是一件好事。它们允许公司提供对高级功能和丰富内容的支持，而这些仅仅使用 HTML 是不容易实现的。其中一些插件功能如此丰富，安装如此广泛，以至于许多网站只是该插件内容的载体。Adobe Flash 更是如此，我经常遇到完全用 Flash 实现的站点。这并没有什么本质上的错误，但这确实意味着浏览器和 HTML 并没有超出其作为 Flash 容器的能力。

插件让浏览器的创造者感到不舒服，因为它把控制权放在插件制造者的手中，HTML5 中增强的一个关键领域是试图把 Flash 用于的那种丰富内容直接放入浏览器。特别是两家公司正在推动人们远离 Flash:苹果和微软。苹果在其 iOS 中不支持 Flash，微软在 Windows 8 中禁用了 Metro 风格版本的 Internet Explorer 中的 Flash。

#### 语义 HTML 的出现

HTML 标准的早期版本并没有把内容的意义和呈现方式分开。如果您想表明一段文本是重要的，您可以应用一个 HTML 元素使文本加粗。由用户来建立粗体内容是重要内容的关联。这是人类很容易做到的事情，而自动化代理很难做到。自从 HTML 第一次被引入以来，内容的自动处理已经变得很重要，并且已经有了将 HTML 元素的重要性与内容在浏览器中呈现的方式分开的逐渐努力。

#### 趋势:HTML 标准落后于 HTML 使用

创建标准的过程总是漫长的，尤其是对于像 HTML 这样广泛使用的东西。有许多利益相关者，每个人都想影响标准的新版本，以获得他们的商业利益或特定的观点。标准不是法律，标准机构最担心的是碎片化——这导致围绕潜在功能和增强功能如何工作的大量耗时的协调。

HTML 的标准团体是万维网联盟(称为 W3C)。他们的工作很艰难，提案成为标准需要很长时间。核心 HTML 规范的修订需要很长时间才能被批准。

冗长的标准过程的结果是 W3C 总是跟随曲线，试图标准化已经被接受的实践。HTML 规范反映了几年前关于 web 内容的前沿思想。这降低了 HTML 标准的重要性，因为真正的创新发生在 W3C 之外，部分在浏览器中，部分在插件中。

### 【HTML5 简介

HTML5 不仅仅是 HTML 规范的最新版本。它也是一个总括术语，描述一组用于制作现代、丰富的 web 内容的相关技术。我将在后面的章节中向您介绍这些技术，但是三个最重要的是核心 HTML5 规范、级联样式表(CSS)和 JavaScript。

核心 HTML5 规范定义了我们用来标记内容的元素，表明其重要性。CSS 允许我们控制显示给用户的标记内容的外观。JavaScript 允许我们操作 HTML 文档的内容，响应用户交互，并利用新 HTML5 元素的一些以编程为中心的特性。

![Image](img/square.jpg) **提示**如果这些都没有意义，请不要担心——我将在第三章中向您介绍 HTML 元素，在第四章中让您熟悉 CSS，并在第五章中刷新您的 JavaScript。

一些人(挑剔、执着、注重细节的人)会指出 HTML5 只是指 HTML 元素。忽略这些人——他们错过了网络内容本质的根本转变。网页中使用的技术已经变得如此相互关联，以至于你需要了解它们来创建内容。如果你使用没有 CSS 的 HTML 元素，你创建的内容用户很难解析。如果你在没有 JavaScript 的情况下使用 HTML 和 CSS，你就错过了为用户的行为提供即时反馈的机会，也错过了利用 HTML5 指定的一些新的高级特性的机会。

#### 新标准

为了应对漫长的标准化过程和标准落后于普遍使用的方式，HTML5 和相关技术由大量小标准定义。有些页面只专注于某个功能的某个特定方面。当然，其他的仍然是数百页的密集文本，涵盖了所有的功能。

这个想法是，较小的团队可以合作开发和标准化对他们来说重要的特性，争议较少的话题可以标准化，而不会被其他特性的争论所阻碍。

这种方法有一些积极和消极的后果。积极的一面是标准*正在*更快地发展。主要的缺点是很难跟踪开发中的所有不同标准以及它们之间的关系。规范的质量也下降了——在一些标准中存在模糊性，这导致了浏览器中不一致的实现。

也许最大的缺点是没有一个基线可以用来评估 HTML5 的符合性。我们仍处于早期阶段，但我们不能依赖于在用户可能使用的所有浏览器中实现的功能。这使得采用特性成为问题，需要仔细评估一个标准被广泛采用的程度。W3C 发布了一个官方的 HTML5 标识，如图 1-1 所示，但它并不表示支持 HTML5 标准或其相关技术的任何特定方面。

![Image](img/0101.jpg)

*图 1-1。W3C HTML5 官方 logo*

#### 拥抱本地多媒体

HTML5 中的一个关键增强是支持在浏览器中本地播放视频和音频文件(也就是说，不需要插件)。这是 W3C 对插件统治地位的回应的一部分，原生多媒体支持和其余 HTML 特性之间的集成提供了很多希望。我在第三十四章中解释了这些特性。

#### 拥抱纲领性内容

HTML5 最大的变化之一是添加了`canvas`元素，我在第三十五章和第三十六章中描述了这个特性。画布是对插件统治的另一种回应，它提供了一个通用的绘图表面，我们可以用它来完成 Adobe Flash 常用的一些任务。

这个特性的重要性部分是因为我们必须使用 JavaScript 来处理`canvas`元素。这使得编程成为 HTML 文档中的头等活动，这是一个重要的变化。

#### 拥抱语义网

HTML5 引入了许多特性和规则，将元素的含义与内容的呈现方式分开。这是 HTML5 中的一个重要概念，我会在第六章中详细介绍。这是我将在本书中多次提到的主题，它标志着 HTML 的新成熟，反映了 HTML 内容生产和消费方式的多样性。这种变化(在 HTML 的早期版本中已经逐渐引入)给 web 开发人员带来了稍微多一点的工作量，因为我们必须标记内容，然后定义它的表示，但是有一些有用的新增强使这个过程不那么麻烦。

### html 5 的当前状态

核心的 HTML5 标准仍在开发中，预计一段时间内不会最终确定。这意味着我在本书中描述的特性和最终标准之间可能会有一些变化。然而，该标准不太可能在几年内完成，变化可能很小。

#### 浏览器对 HTML5 的支持

最流行的 web 浏览器已经实现了许多 HTML5 特性，在本书中，我将向您展示如何通过在 Google Chrome 或 Mozilla Firefox 等浏览器中查看 HTML5 文档来显示示例。然而，并不是所有的浏览器都支持所有的特性，在实际项目中使用一个特性之前，检查一下是否存在支持是值得的。有些浏览器，比如 Chrome ad Firefox，几乎是持续更新的。在我写这本书的时候，我已经记不清我应用了多少次浏览器更新，每次更新都会带来一些新的功能或漏洞修复。这意味着我无法给出关于哪些浏览器支持哪些功能的确切信息。但是考虑到 HTML5 标准的碎片化本质，使用 JavaScript 库检查特性是有意义的，比如 *Modernizr* ( [`http://www.modernizr.com`](http://www.modernizr.com.) )。Modernizr 允许您以编程方式检查用户使用的浏览器是否支持关键的 HTML5 特性，让您能够在文档中决定依赖哪些特性。

如果要提前规划，我推荐网站*什么时候可以用？* ( [`http://caniuse.com`](http://caniuse.com.) )，提供了浏览器支持和采用率的详细信息，似乎维护得非常好。

#### 对 HTML5 的站点支持

使用 HTML5 特性的网站数量正在快速增长。有些只是演示站点，展示给定的 HTML5 特性是如何出现的，但是有越来越多的更实际的站点可以利用 HTML5 浏览器。一个很好的例子是 YouTube，它现在提供原生 HTML5 视频支持——当然，Flash 视频用于较旧的浏览器。

### 本书的结构

我把这本书分成了五部分。这一部分，即第一部分，包含了你使用这本书所需要的信息，以及对 HTML、CSS 和 JavaScript 的复习。如果你最近没有做过任何 web 开发，你会发现这些章节会让你快速上手。

第二部分涵盖了 HTML 元素，包括 HTML5 中新增的或修改的元素。对每个元素都进行了描述和演示，您可以找到关于元素默认表示的信息。

第三部分覆盖*层叠样式表* (CSS)。这些章节描述了所有可用于样式化内容的 CSS 选择器和属性，您会发现大量的示例和演示有助于将所有内容放入上下文中。在这些章节中，我将介绍 CSS 的最新版本(CSS3 ),但是我也会向您展示 CSS1 和 CSS2 中引入了哪些特性。

第四部分描述了*文档对象模型* (DOM)，它允许你使用 JavaScript 浏览和操作 HTML 内容。DOM 包含一组对于创建丰富的 web 内容至关重要的特性。

第五部分包含了高级 HTML5 特性的信息，比如 Ajax、多媒体和`canvas`元素。这些功能需要更多的编程技巧，但对您的 web 内容提供了显著的增强。您不必使用这些特性来利用 HTML5，但是对于复杂的项目，它们是值得考虑的。

![Image](img/square.jpg) **注意**本书中我没有涉及的一项 HTML5 相关技术是可伸缩矢量图形(SVG)。SVG 允许您使用标记或 JavaScript 创建二维矢量图形。SVG 不是一个可以轻视的话题。如果你对 SVG 感兴趣，我推荐 Kurt Cagle 的 *SVG 编程*，这本书也是由 Apress 出版的。

### 查找有关 HTML5 的更多信息

我试图在本书中做到全面，但不可避免的是，你会遇到一个我没有解决的问题，或者有一个我没有回答的问题。当这种情况发生时，首先要查看 W3C 站点(`w3c.org`)。在这里，您可以仔细阅读标准，并找出应该在浏览器中发生什么。这些标准可能很难理解(并且倾向于自我参照)，但是它们提供了一些有用的见解。

一个更友好但不那么权威的资源是 Mozilla 开发者网络(`developer.mozilla.org`)。有很多关于不同 HTML 特性的有用信息，包括一些不错的 HTML5 内容。

### 总结

在这一章中，我提供了一些解释 HTML5 的背景，列出了 HTML 历史上的关键转折点，并解释了 HTML5 如何试图解决这些问题。在下一章中，我将告诉你如何准备学习本书中的许多例子。之后，我们将开始探索 HTML5，从 HTML 元素本身开始。