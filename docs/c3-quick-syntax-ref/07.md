# 七、特异性

当多个规则应用于同一个元素并且它们指定了相同的属性时，会有一个优先级方案来确定哪个规则具有优先权。简而言之，CSS 优先考虑具有最具体选择器的规则。

## 选择器特异性

计算特异性有一些基本规则。权重为 0 的最低特异性由通用选择器(*)给出，它匹配文档中的所有元素。

```html
* { color: red; } /* 0 */

```

类型选择器和伪元素的权重为 1，因此包含两个类型选择器和一个伪元素的选择器的特异性为 3。

```html
p { color: blue; } /* 1 */
body p::first-letter { color: gold; } /* 3 */

```

类选择器的权重为 10，伪类和属性选择器也是如此。将这些选择器中的一个与类型选择器包括在内，总权重为 11。

```html
.a { color: lime; } /* 10 */
p:first-child { color: navy; } /* 11 */
p[class=a] { color: teal; } /* 11 */

```

Id 选择器的权重为 100，所以 id 规则会覆盖大多数其他冲突的样式。

```html
#i { color: aqua; } /* 100 */

```

内联样式有更大的特异性。权重为 1000 时，内联样式甚至比 id 规则更重要。

```html
<p style="color: black;">Text</p>

```

为了覆盖所有其他冲突的样式，包括那些定义为内联样式的样式，可以将声明声明为`!important`。注意,`!important`修饰符适用于单个声明，而不是整个规则。

```html
p { color: red !important; }

```

如果两个冲突规则之间的特异性相同，则级联决定应用哪个规则。

## 串联

在 CSS 中，不止一个样式表可以影响文档的显示。这个特性被称为层叠(CSS 的“C”部分)，因为浏览器在应用样式之前会合并所有样式表以解决任何冲突。

Web 文档可以有来自三个不同来源的样式表:浏览器、站点设计者和阅读文档的用户。设计者的样式表通常具有最高的优先级，其次是用户的个人样式表(如果有的话)，然后是浏览器的默认样式表。

## 设计师风格

如前所述，web 设计者有三种方法来包含 CSS 规则:内联样式、内部样式表和外部样式表。在这三种样式中，内联样式的优先级最高，其次是内部样式表，然后是外部样式表。

如果网页包含多个具有冲突规则(相同特性)的外部样式表，则 HTML 标记中最后包含的样式表优先。在样式表中也是如此。如果选择器是相同的，那么最后声明的属性是最重要的。

```html
p { color: orange; } /* overridden */
p { color: silver; } /* dominant */

```

对于继承的样式，元素自身的样式优先于从其祖先继承的样式。

```html
p { color: orange; } /* dominant */
body { color: silver; }

```

## 特异性指南

如本章所示，一个元素的样式可以在许多不同的地方用不同的优先级来指定。层叠特性为 CSS 提供了很大的灵活性，但是如果管理不好，也会导致不必要的复杂性。

通常，您希望保持较低的特异性，以便更容易知道哪些规则将优先。这样，您可以通过调整样式规则出现的顺序来让级联为您工作，而不是不必要地增加 id 和`!important`的特异性来覆盖冲突的样式。