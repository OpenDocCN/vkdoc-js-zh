# 四、好吧好吧，我去拿标签。但是我告诉你，这一点都不好玩

那么到目前为止我们做了什么？

*   我们已经建立了 HTML5 的结构元素试图改进的广泛(有点模糊)的概念——大纲，这目前是通过标题标签隐式完成的。
*   我们已经确定了大纲的用途——帮助那些非常依赖文档标题的屏幕读者。
*   我们还提到了一种更好的方法，帮助盲人用户使用 ARIA 地标浏览我们的页面。

现在让我们看看 HTML5 规范([`whatwg.org/html`](http://www.whatwg.org/specs/web-apps/current-work/multipage/))是如何描述这些新的独立元素的，从…

## 

<header></header>

关于`<header>`，你需要知道两件事:

1.  它实际上不做任何事情。
2.  它的预期用途并不像你想的那样。

`<header>`元素是一个很好的例子，其中一个常用术语在 HTML5 中有了新的含义，同时还被用来“铺路”。你可能一直都在使用`<div id="header">`,所以称它为`<header>`会更容易阅读，如果没有别的原因的话，对吗？好吧，这里有一个 HTML5 的每个人都使用它，所以让我们改变意义的时刻。说明书上是这么说的:

> header 元素表示一组介绍性的或导航性的帮助。
> 
> 注意:header 元素通常包含部分的标题(h1–h6 元素或 hgroup 元素)，但这不是必需的。header 元素还可以用来包装一个部分的目录、搜索表单或任何相关的徽标。

该注释具有指导意义——`<header>`的预期目的是包含一个*部分的标题*。请记住，sections 是用四个分节元素(article、section、nav、aside)之一创建的，并在 HTML5 中生成一个文档大纲。`<header>`元素旨在使切片元素内的*工作。它不会自己创建一个节(尽管它通常在视觉上被表示为另一个节元素)，也不会添加到文档轮廓中。*

可以把`<header>`看作是包装部分标题的东西，它可以是从文档最顶端的部分开始的任何东西，比如在`<body>`标签内的标题(也就是，徽标和所有我们通常认为是标题的“标题”东西)，一直到评论的标题。

### 真的，它什么都不做

元素所做的只是说“这是给定部分的标题”。问题是，虽然你的标记可能会这么说，但目前没有一个浏览器或用户代理在监听。

根据希克森的说法，*它们可能永远不会成为*(参见希克森在本章后面的“结论:R.I.P. HTML5 结构标签”中的评论)。所以这个元素现在不做任何事情，以后很可能也不会做任何事情。这在语义上相当于一棵树倒在森林里，周围没有人听到。

假定`<header>`元素没有修改或添加到文档大纲中，那么您在文档大纲中看到的作为项目符号的*实际*标题(例如“我的伟大博客”)仍然由`<h1>` - `<h6>`元素设置。`<header>`标签只是包装那些标题元素，以及任何其他标题元素，比如日期。所以你可以这样做:

`<header>
<h1>My blog post</h1>
<p>Published on...</p>
</header>`

### 

<header>无处不在，屏幕阅读器怎么用？</header>

你可能认为屏幕阅读器可以跳过`<header>`元素，直接进入内容。但是我们(或用户代理)无法确定文档中的第一个`<header>`是主页面标题。如果你的标记是非标准的顺序(首先是内容，然后是页眉、页脚和侧栏)，文档可能会有许多`<header>`，其中没有一个我们称之为典型的“页眉”。因此，在处理页面的“整体”标题时，我们又回到了起点。

### 咏叹调替代:横幅

幸运的是，对于盲人用户来说，还有一个选择。ARIA 标志`banner`划分了我们目前所知的“标题”。以下是 ARIA 规范如何定义横幅地标([`www.w3.org/ TR/wai-ARIA/roles # banner`](http://www.w3.org/TR/wai-aria/roles#banner)):

> 主要包含面向网站的内容，而不是特定于页面的内容的区域。
> 
> 面向网站的内容通常包括网站赞助商的徽标或身份，以及特定于网站的搜索工具。横幅通常出现在页面的顶部，通常横跨整个宽度。

它应该在每个文档中只出现一次，这样屏幕阅读器就可以直接跳到那里，并且相当确定它是什么——这正是我们想要的。

### 建议

元素太宽泛(也太无意义)而没有用。相反，在适当的元素上使用更具体的 ARIA `role="banner"`(如果需要的话，为 IE6 使用一个冗余的“banner”类)作为页面的传统“header”。

## 

<nav></nav>

规格如下:

> nav 元素表示链接到其他页面或页面内部分的页面部分:带有导航链接的部分。
> 
> 并非页面上的所有链接组都需要包含在 nav 元素中——只有包含主要导航块的部分才适合 nav 元素。特别是，页脚通常有一个指向网站各种页面的简短链接列表，如服务条款、主页和版权页面。在这种情况下，单独的页脚元素就足够了，不需要 nav 元素。

`<nav>`元素*确实*在你的大纲中创建了一个新的部分，并且受益于:

*   有点不言自明
*   有看似有用的目的。

这个想法是，如果我们用`<nav>`标签标记我们的导航，盲人可以绕过它，直接进入内容，当他们想去别的地方时，直接跳到导航链接。

无障碍的胜利，对吗？

### 善意；无障碍灾难

尽管有这些良好的意图，但为一部分人这样做可能会破坏另一部分人的导航:禁用 JavaScript 的 IE 6、7 和 8 用户。

由于 IE6-8 处理“未知”元素的方式，这些用户不会获得该元素的任何 CSS。它可能会影响一百个用户中的一个——比使用屏幕阅读器的人的比例更高——使得使用这一元素的整个想法在中短期内有点不切实际。(这是所有 HTML5 元素的问题，我们将在本章后面进一步讨论。)

### ARIA 替代方案:导航

幸运的是，我们可以使用 ARIA 地标`navigation`，通过在适当的`<div>`(或`<ul>`)上包含`role="navigation"`来使我们的导航更容易访问，而不会损害其他人的可访问性。ARIA 规范将导航地标(【http://www.w3.org/】TR/wai-ARIA/roles # navigation)定义为:

> 用于导航文档或相关文档的导航元素(通常是链接)的集合。

### 建议

使用`role="navigation"`。认为`<nav>`元素有害，直到只剩下极少数的 IE8 用户。(这实际上是指 Windows XP 用户，因为 IE8 是他们将得到的最后一个浏览器。我们可能要等一会儿。)

## 

<section>和</section>

这些听起来一样(每个人都会把它们搞混)，但是它们有不同的用途。我们先分别看一下，然后比较两者。请试着不要扔无生命的物体或小动物，同时试着用头抱住它们。

规格如下:

> section 元素表示文档或应用程序的一般部分。在这种情况下，节是内容的主题分组，通常带有标题。
> 
> 章节的例子可以是章节、选项卡式对话框中的各种选项卡式页面或者论文的编号章节。网站的主页可以分为介绍、新闻条目和联系信息几个部分。
> 
> 注意:当联合元素的内容有意义时，鼓励作者使用 article 元素而不是 section 元素。
> 
> 注意:section 元素不是通用的容器元素。当出于样式目的或者为了方便脚本而需要一个元素时，鼓励作者使用 div 元素。一般规则是，只有当元素的内容在文档的大纲中明确列出时，section 元素才是合适的。

好吧，让我们试着理解一下。`<section>`元素应该表示文档中的通用部分。因此，如果这一章是一个网页，我们可以用`<section>`标签把它分成几块。它还可以表示主页的不同区域，从新闻条目到联系信息。但是它不应该被用作样式的通用容器元素——那需要一个`<div>`。

它也不应该用于页面的内容区域(`<article>`也不应该)，但是我们在讨论缺少的`<content>`元素时会谈到这一点。

### 区段==大纲

同样，理解`<section>`的关键是理解文档大纲和文档分节的概念。规范提到了这一点(阅读第二条注释的最后一句)，但当`<section>`是创建文档大纲的主要工具时，这并不多。根据经验，就创建大纲而言，如果它不是`<article>`、`<nav>`或`<aside>`，它很可能是`<section>`。

这也是为什么你不应该使用`<section>`对通用容器进行样式化。如果你只是把它们扔进去，这样你就可以设计一个区域*而不用*考虑你的轮廓，你会得到一个不合逻辑的、破碎的轮廓，这就破坏了使用`<section>`的全部意义。这是一个常见的错误，表明它们在规范中的解释、专家的提倡以及社区的理解是多么的糟糕(我并不是在责怪社区)。

### 俄罗斯娃娃

别忘了:你可以嵌套节(不管是由`<section>`、`<article>`、`<nav>`还是`<aside>`创建的)。正如我们在第三章中看到的，在纯 HTML5 领域，这决定了`<h1>` - `<h6>`元素的真正标题级别——而不是你使用的标题级别。在 HTML5 中，用户代理(理论上)只是把它们看作是一个部分中的通用标题元素。

所以我们可以在任何地方使用`<h1>` s，用户代理会判断它们是否嵌套为`<h1>`或`<h101>`。然而，对于屏幕阅读器来说(现在，可能还有很长一段时间)，我们需要恰当地使用`<h1>` - `<h6>`标题，不管我们使用什么风格的 HTML。

### 建议

如果你想以 HTML5 的方式创建大纲，你将主要依赖于`<section>` s。这个元素花了 20 多年才进入规范(回想一下上一章蒂姆·伯纳斯·李的评论)，而且人们可能还需要 20 年才能正确理解它。

没有对应的咏叹调。

你可能会认为“文章”就像“报纸文章”。嗯，你真可耻，以为一个新的 HTML5 元素会有直观的含义。在这里，它更像是“一件衣服”。是的，另一个有着非直观意义的“语义”术语。

规格如下:

> article 元素表示文档、页面、应用程序或站点中的自包含组合，并且原则上是可独立分发或可重用的，例如在联合中。这可以是论坛帖子、杂志或报纸文章、博客条目、用户提交的评论、交互式小部件或小工具，或者任何其他独立的内容项目。
> 
> 当文章元素被嵌套时，内部文章元素表示原则上与外部文章的内容相关的文章。例如，站点上接受用户提交的评论的博客条目可以将评论表示为嵌套在博客条目的 article 元素中的 article 元素。

以下是 2012 年初 WHATWG 邮件列表上的希克森([`lists.whatwg.org/·皮珀邮件/whatwg-whatwg.org/ 2012-1 月/034506.html`](http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2012-January/034506.html)):

> <article>涵盖了广泛的语义:</article>
> 
> -论坛文章
> -报纸文章
> -杂志文章
> -书籍
> -博客文章
> -评论论坛文章
> -评论报纸文章
> -评论杂志文章
> -评论博客文章
> -可嵌入的互动小工具
> -社交网络上带有照片的文章
> -评论社交网络上的照片
> -规范
> -电子邮件
> -回复电子邮件

在 HTML4 中，段落就是段落，段落就是段落。在 HTML5 中,“文章”是论坛帖子，是博客评论，是小工具，是实际的文章。如果一个元素有这么宽泛的含义，怎么才能更有“语义”？就像决定把刀、叉、勺、盘子、电视都叫“叉”。

这不是为牛仔铺路。

同样，最好从轮廓的角度来理解。`<article>`元素用于在您不想使用`<section>`时创建一个部分，这通常是在您包装一些内容块(或“交互式小部件”，视情况而定)时。

该规范讨论了如何将一个`<article>`整合为一个自包含的元素，但是如何以及为什么会这样还不清楚(使用 RSS！)是找问题的解决方案。

### 规格应说明

`<article>`的主要问题是它有不同的解释(“原则上”是什么意思可重复使用？").当规范把事情留给你去解决时，它就失败了。规范的全部意义在于*明确规定*你应该做什么。但是在这里它是开放的，没有明确的好处，并且重复现有的功能(它是有不同名字的`<section>`)。

### 文章和评论嵌套

当内容相关时，您还可以将`<article>`嵌套在`<article>`中。该规范建议将博客评论包装在`<article>`标签中，然后嵌套在博客条目的整体`<article>`中。这就是“叉子”和“勺子”都是“叉子”的问题。如果你有`<article class="post">`和`<article class="comment">`，那么`article`就变成了`div`的更冗长的形式。

为什么不直接添加一个`<comment>`元素，至少为标准的文章后接评论模式提供基本的标记，这个模式几乎被网络上的所有博客和出版物所使用？那不是在为牛仔铺路吗？伊恩·希克森不这么认为，他在这个问题的语义上注入了自己独特的观点:文章和评论之间没有区别([`lists.whatwg.org/·皮珀梅尔/whatwg-whatwg.org/ 2012 年 1 月/034506.html`](http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2012-January/034506.html)):

> 我认为认为网站所有者的言论在某种程度上不同于网站读者的言论是不合时宜的。他们有什么不同？
> 
> 相反，在网络上没有什么不同。一篇文章不过是被提升到更显著位置的评论。

具有讽刺意味的是，在这些“话语”之间定义至少一个差异，然后宣称没有差异，这显然没有被希克森理解。

当然，这也违背了经常提到的目标，即这些元素主要是为了帮助作者维护他们的文档。如果曾经有过标记模式出现的例子——一篇文章，后面跟着评论——这就是了。然而，既是运动员又是裁判的希克森丝毫不为所动，坚持自己独特的哲学观点，即所有的“评论”都是平等的，仅此而已。我们只能在 HTML5 中嵌套`<article>` s，而网络上的内容看起来将会一直是`<article>` s。

### 搜索引擎不需要

有些人可能认为`<article>`可以帮助搜索引擎，但是他们不需要标签来知道你的内容在哪里。他们的整个存在依赖于他们能够找到你的内容，而不需要那种帮助。即使`<article>`被广泛使用，他们如何通过单独的标记知道`<article>`是指博客帖子、论坛帖子、交互式小工具、评论还是其他什么？这对 SEO 来说太宽泛了，即使他们*真的*在乎你用了什么标签(他们大多不在乎)。

(我们将在第六章讨论 HTML5 和 SEO 时对此进行更多讨论。)

### 

<article>不为“主要”部分</article>

而`<article>`不是用来表示页面的内容区域。这里没有实际的元素——这是我们稍后将讨论的缺失的`<content>`问题。

我还不能确定这种元素的定义中是否包含任何非法物质。

### 建议

你应该用这个吗？我不会。相反，我会把它归入“在被证明之前毫无用处”这一类。如果一个实用的好处出现了，疯狂吧。在那之前，通过。

像`<section>`一样，没有对应的咏叹调。

### 那么

<article>和

<section>有什么区别呢？</section>

</article>

你需要知道的一些事情:

*   文章可以嵌套在文章中。
*   文章可以按节分解。
*   一个部分可以分解成文章，文章又可以有单独的部分。
*   人们不擅长一致地使用标记。

你猜怎么着？除了少数标记超级书呆子，任何真正使用这些元素的人(如果有人这样做，我会感到惊讶)只会制造一个巨大的混乱。但是，也许我错了。

就我个人而言，我宁愿拿一个生锈的土豆削皮器去削我的小手指，也不愿去争论`<section>`和`<article>`的优点。有争论的事实证明了规范的失败。如果你在实现一个元素时不得不争论它，你就输了。

然而，关于这一细微区别的数千字已经出现在博客帖子(例如，Bruce Lawson 的 take:[`www.brucelawson.co.uk/ 2010/html 5-articles-and-sections-what-the-difference/`](http://www.brucelawson.co.uk/2010/html5-articles-and-sections-whats-the-difference/))和评论帖子中。

人们可能会希望，当我们只是为了决定使用哪个 HTML5 元素而制作善意但荒谬的*流程图*时，社区就会明白这种情况的荒谬性(参见:[`html5doctor.com/下载/h5d-sectioning-flowchart.png`](http://html5doctor.com/downloads/h5d-sectioning-flowchart.png))。唉，看来还没有。所有这一切都是因为一个或三个 WHATWG 成员在 2004 年决定将这些额外的`<section>`味道加入 Web Applications 1.0 规范。

好了，我们撕掉了创可贴，熬过了 HTML5 新元素中最痛苦的部分。但是仍然有一些粘性的残留物，脱落时会有点刺痛，所以让我们看看最终的切片元素。

问:你把引用、附加信息和侧边栏叫做什么？

如果你说，“一段引用、附加信息和侧边栏”，你就输了——呸。你叫他们“靠边站”。很明显，是吧？规格如下:

> side 元素表示页面的一部分，它由与 side 元素周围的内容无关的内容组成，并且可以被认为是与该内容分离的。在印刷排版中，这样的部分通常被表示为侧栏。
> 
> 该元素可用于印刷效果，如引用或侧边栏、广告、导航元素组以及被认为与页面主要内容分离的其他内容。

很难理解为什么引用、广告或博客导航元素(包括博客滚动和归档的`<section>`——这是规范中的用例)应该被称为相同的东西。但是在 HTML5 结构语义的怪异世界中，它们是存在的，你可以愉快地忽略它们。

### 在奇怪的地方创建一个大纲部分

先不说*是否在文档大纲中创建了一个部分，鉴于其广泛的使用案例，这使得它更加奇怪。(为什么引用应该是它自己的部分？)如果只是为了一个侧边栏，或者甚至叫做`<sidebar>`(最初的名字)，那可能有意义，但它不是，也没有意义。*

 *### ARIA 替代:补充

在这种情况下，ARIA 标志性的替代方案是`complementary`，ARIA spec 将其描述为([`www.w3.org/ TR/瓦伊-aria/角色#补充`](http://www.w3.org/TR/wai-aria/roles#complementary)):

> 文档的支持部分，旨在补充 DOM 层次结构中类似级别的主要内容，但在与主要内容分离时仍然有意义。
> 
> 有各种类型的内容可以恰当地扮演这一角色。例如，在门户的情况下，这可以包括但不限于节目时间、当前天气、相关文章或要观看的股票。补充角色表示所包含的内容与主要内容相关。如果补充内容是完全可分离的主要内容，使用更一般的角色可能是合适的。

### 建议

在适当的`<div>`(或其他元素)上使用`role="complementary"`作为你的模板中的侧边栏(以及任何其他适当的地方)。

还记得`<header>`是如何看似显而易见，实则不然吗？嗯，和`<footer>`也是一样的处理。听起来它应该只是主页脚，但实际上它可以是任何给定部分的页脚。以下是 HTML5 规范:

> footer 元素表示其最近的祖先节内容或节根元素的页脚。页脚通常包含有关其章节的信息，如作者、相关文档的链接、版权数据等。
> 
> 一个部分的作者或编辑的联系信息属于一个地址元素，可能它本身在一个页脚中。
> 
> 页脚不一定要出现在一节的末尾，尽管它们通常会出现。

像页眉一样，页脚是您在一个节中使用的东西，它们本身不会创建一个节。同样，这令人困惑，因为在 HTML5 书籍和博客文章的例子中，页脚似乎是模板中一个独特的*视觉*部分，与`<article>`或`<aside>`同等重要，而事实上它根本没有出现在文档大纲中。它只是描述了父部分的一部分，无论该部分出现在哪里(无论出现的频率有多高)。

### 页脚也不做任何事情

和`<header>`一样，`<footer>`实际上什么都不做。事实上，`<footer>`连一个元素的结尾都没有去。规范在`<article>`部分给出了一个例子，其中注释的元数据(注释作者和时间戳)被包装在一个`<footer>`中，并放在注释的顶部——等等。显然这个元素还不够混乱。

同样，这里没有牛巴铺路。我当然没有听到一千个网页设计师为页面上的每一部分大声疾呼`<footer>`元素。是吗？

### 胖脚？祝你好运！

如果你有一个时髦的“胖页脚”，里面有一堆链接和其他信息，该怎么办？如果是一大块内容，那就应该是一个小节，所以你可以使用四个小节元素中的一个——`<nav>`、`<section>`甚至`<aside>`。

但是，为了保持有趣，你*可以*在`<footer>`标签中包装那个切片元素。因此，`<footer>`既可以将内容*限定在文档大纲的*部分中，*和*可以将文档大纲中的其他部分换行，但仍然不能单独创建一个部分。

像泥浆一样清澈，是吧？我不明白为什么会这样，我怀疑大多数网页设计师也不会明白。我见过比这些元素更有意义的日本游戏节目。

### 能给我一只脚吗，老板？

关于元素的提议已经存在很长时间了。当 2002 年——大约十年前——在 W3C 公共邮件列表上讨论 XHTML 2.0 时，人们很快就开始批评它(见:[`lists.w3.org/档案/公共/www-html/2002 aug/0257.html`](http://lists.w3.org/Archives/Public/www-html/2002Aug/0257.html))，说它不会提供任何实际的好处。十年后，这种批评似乎仍然有效。

### ARIA 替代:Contentinfo

再说一次，就可及性而言，艾瑞亚是救星。它的`contentinfo`标志反映了传统页脚的内容(即页面底部的一些链接和一些小字)，没有呈现名称。ARIA 规范将其描述为([`www.w3.org/ TR/瓦伊-aria/ roles#contentinfo`](http://www.w3.org/TR/wai-aria/roles#contentinfo) ):

> 包含有关母文档信息的大的可感知区域。
> 
> 页面此区域包含的信息示例有版权和隐私声明链接。

与`<footer>`不同，它应该只在每个文档中使用一次。

### 建议

我们可以对页脚使用一次`<div role="contentinfo">`。如果有大量的导航元素，我们也可以继续使用`<div id="footer">`(或者你喜欢的任何东西)和`role="navigation"`。

## 我的<content>元素在哪里？</content>

到目前为止，我们已经讨论了四个分段元素(`<nav>`、`<section>`、`<article>`和`<aside>`，以及定义这些分段中的区域的两个元素(`<header>`和`<footer>`)。

这些元素主要定义了文档大纲中的各个部分，我怀疑许多 web 设计者会为此费心。但是假设你决定使用它们。您开始标记整个模板，用四个切片标记创建切片，并在适当的地方插入`<header>`和`<footer>`。

但是等等，少了点什么。实际内容区域使用什么标签？

一个`<div>`。

不，我不是自作聪明。真的没有`<content>`或`<main>`标签。

为什么不呢？伊恩·希克森认为这是多余的。根据定义，一个完美标记的 HTML5 页面中的任何东西，如果*不是`<header>`、`<nav>`、`<aside>`或`<footer>`(可能还有顶级的`<section>`，但我们不去那里)*就是页面的*`<content>`。*

以下是希克森在推特上解释这一决定([`twitter.com/ #！/Hixie/status/892228541`](http://twitter.com/#!/Hixie/status/8922228541)):

> 任何不在
> 
> <header>、
> 
> <footer>、
> 
> <aside>或
> 
> <nav>中的东西根据定义都是<content>，所以我们不需要显式元素。</content></nav>
> 
> </aside>
> 
> </footer>
> 
> </header>

虽然这种逻辑很可爱，但告诉 web 设计人员用显式(通常是多余的)标签标记页面的不同部分，而不用担心实际内容(页面的主要部分)，因为它的标记是隐含的，这是荒谬的。

当事情像这样被暗示时，你必须是“知情的”。不幸的是，大多数网页设计者并不“了解”这个特殊的规则，因此会不知不觉地误用`<section>`或`<article>`来填补感觉上的空白。

布鲁斯·劳森解释了他在[`html5doctor.com`](http://html5doctor.com)([`lists.w3.org/档案馆/Public/Public-html/2009 aug/1366.html`](http://lists.w3.org/Archives/Public/public-html/2009Aug/1366.html))上看到的:

> 不考虑纯度，作者*想要*有一个
> 
> <main>标签。</main>
> 
> HTML5 doctor 收到许多关于如何标记主要内容的电子邮件，这可以说是对
> 
> <section>的最大误用，因为人们正在使用
> 
> <section>来做这件事。(HTML5 doctor 本身是这样做的；我们知道，并计划改变它)</section>
> 
> </section>
> 
> 也许我们都被那些邪恶的网络标准人士洗脑了，但是你用他们自己的元素标记外围的东西似乎是不对的，但是主要的内容——页面的目的——仅仅得到一个微不足道的无意义的类属
> 
> 。

(杰瑞米·基思也附和着支持一个`<main>`元素:[`lists.w3.org/档案馆/Public/Public-html/2009 aug/1397.html`](http://lists.w3.org/Archives/Public/public-html/2009Aug/1397.html)。)

假设 web 作者将正确使用其他 HTML5 结构元素*和*理解他们的“主要”内容应该只使用一个`<div>`而不是一个显式标签是很糟糕的。最好是将标签添加到规范中，这样用户代理就可以直接跳到它上面(假设他们决定支持它)。

尽管在 HTML5 的发展过程中，这种反对意见被提出过几次，但希克森不同意，仅此而已。没有你的汤标签。

### ARIA 替代:主

幸运的是，我们还可以使用另一个 ARIA 标志，简单来说就是`main`。它做我们希望它做的事情，并为我们试图帮助的人服务——盲人用户。

下面是 ARIA 规范如何定义`main`([`www.w3.org/ TR/瓦伊-aria/ roles#main`](http://www.w3.org/TR/wai-aria/roles#main) ):

> 这标记了与文档的中心主题直接相关或扩展的内容。主要角色是“跳转到主要内容”链接的一个不显眼的替代，其中到主要内容(或其他地标)的导航选项由用户代理通过对话或辅助技术提供。

### 建议

在页面的主要内容区域使用一次`<div role="main">`。

## 其他 ARIA 地标

这里有更多的 ARIA 标志，在标记你的页面时可能会有用:

*   `application`用于页面上的软件小部件。
*   `form`对于表单，除了搜索之外，哪些会得到...
*   `search`用于页面上的搜索表单。

他们和我们看过的其他人一样:

*   `banner`为整体表头。
*   `navigation`因为，你猜对了，导航。
*   `complementary`为侧栏。
*   `contentinfo`为页脚。
*   `main`为主要内容区。

(注意，`banner`、`main`和`contentinfo`在每个文档中只能使用一次。)

有关这些地标的更多信息，请参见 Steve Faulkner 对 HTML5 元素的精彩对比:[`www.paciellogroup.com/博客/2010/10/using-wai-aria-landmark-roles/`](http://www.paciellogroup.com/blog/2010/10/using-wai-aria-landmark-roles/)。

关于 ARIA 的更多信息，请参见 Mozilla 的 ARIA 文档:[`developer.mozilla.org/·恩/ aria`](https://developer.mozilla.org/en/aria) 。

## 有趣的事情发生了...优雅的退化消失了，JavaScript 变成了强制性的

在前几章中，我已经多次提到这些元素会对另一小组用户造成伤害。对于一些用户来说，如果他们关闭了 JavaScript，这些标签会在 IE6、7 或 8 中破坏你的页面(由于个人选择和过于热心的安全考虑，这比你想象的更常见)。

问题是 IE 6-8 如何处理“通用”元素。对 IE6-8 来说，通用标签是*它不能识别的任何东西*，不管它是完全虚构的元素，像`<mymadeuptag>`还是 HTML5 的`<nav>`。鉴于 IE6-8 根本不识别通用元素，我们无法在不使用少量 JavaScript 告诉 IE6-8 它们存在的情况下设计它们的样式。

这个聪明的 JavaScript 变通方法是由 Sjoerd Visscher 发现的，并由 Remy Sharp 在 2009 年推广(参见:[`html5doctor.com/ how-to-get-html 5-working-in-ie-and-Firefox-2/`](http://html5doctor.com/how-to-get-html5-working-in-ie-and-firefox-2/))。现在我们可以用一点点 JavaScript 告诉 IE6-8 特定的元素*确实*存在，我们可以愉快地离开了...或者我们可以吗？

不，我们不能。

但是我们可以吗？

号码

(声明一下，有问题的 JavaScript 可以在这里找到:[`code.google.com/ p/html 5 shiv/`](http://code.google.com/p/html5shiv/)。正如我们在第二章中提到的，你还需要告诉其他浏览器用 CSS 把新元素当作块级元素。)

现在我们遇到了一个大障碍:关闭了 JavaScript 的 IE 6-8 用户没有得到 HTML5 的修复。

坚持住。现在真的有人关闭 JavaScript 吗？有什么数据可以给我们一些启示吗？

是的，有。

## 雅虎的 JavaScript 研究

2010 年，雅虎公布了他们对这个问题的研究结果——有多少访问者*禁用了 JavaScript？结果显示，访问雅虎美国网站(包括大量非美国流量)的访问者中有 2.06%禁用了 JavaScript，英国、法国和西班牙的这一比例分别为 1.29%、1.46%和 1.28%。(巴西是个例外，只有 0.26%。).*

 *所以，除非你是为巴西用户设计，否则你仍然需要考虑禁用 JavaScript 的用户。

你可以在这里阅读这项研究:[`developer.yahoo.com/博客/ ydn/ posts/ 2010/ 10/多少用户禁用 JavaScript/`](http://developer.yahoo.com/blogs/ydn/posts/2010/10/how-many-users-have-javascript-disabled/)以及雅虎 ydn 博客上的[`developer.yahoo.com/博客/ydn/posts/2010/10/follow-up-多少用户禁用 JavaScript/`](http://developer.yahoo.com/blogs/ydn/posts/2010/10/followup-how-many-users-have-javascript-disabled/)。

让我们假设美国主要网站的高流量为 2 %, IE 6-8 用户占你的受众的 50%。这意味着每一百个用户中至少有一个关闭了 IE6-8 和 JavaScript。即使是千分之一，对于一个中等繁忙的网站来说，每天至少也有一个人。

那么如果使用 HTML5 结构化标签，这些访问者会怎么样呢？

如果你在现有的标记周围使用`<section>`标签(或任何其他标签),而*不使用*样式，什么都没有。如果你真的想的话，你仍然可以用那种方式创建轮廓，只要你记住盲人用户仍然依靠标题来浏览你的页面。

但是如果你使用`<header>`、`<footer>`、`<nav>`、`<aside>`或者`<article>`(或者`<section>`)，而你*很可能*使用它们，坏事情 <sup>TM</sup> 就会发生。

具体来说，禁用了 JavaScript 的用户会看到你的站点样式正常，*除了使用 HTML5 元素的设计部分的*。当这些元素包装我们的导航、标题、侧边栏或文章时，我们就有问题了。这些元素——不像页面的其他部分——不会应用我们的 CSS 样式，因此可能会以非常严重的方式中断。

## 事情是这样的...

例如，这是我的一个客户网站的主导航，首先用`<div id="nav">`包装一个普通的`<ul>`链接列表:

![](img/fig4-1.jpg)

图 4.1。禁用 JavaScript 且没有 HTML5 元素的站点导航。

这是 IE7 中禁用 JavaScript 的一个`<nav>`元素:

![](img/fig4-2.jpg)

图 4.2。同样的导航使用 HTML5 的

<nav>元素，禁用 JavaScript。</nav>

不酷，对吧？这只是一个因素。想象一下，如果标题和侧边栏以类似的方式分解，而正文、包装器和内容区域仍然保持样式。不漂亮。

## 怎么办？哦，XP....

最安全的做法是根本不给 IE6-8 用户禁用 JavaScript 的样式(这可以通过条件语句和用 JavaScript 编写样式元素来实现)。但是我不提倡这样做——你仍然在不必要地破坏他们的体验。

IE9 及以后呢？令人欣慰的是，IE9 识别 HTML5 元素，并改进了处理一般元素的方式。

也许 IE9 迟早会取代 IE6、7、8，这些非 JS 用户我们就可以忘掉了。啊，那将是一个怎样的世界。不幸的是，Windows XP 用户永远不会得到 I e9——I E8 对他们来说是穷途末路。只要 XP 还在，我们就会有 IE8 访客，他们的体验会因为这些元素而被不必要地破坏。

没人应该忍受这些。

像`<nav>`这样的元素应该(理论上)帮助视力受损者。但是当我们*按照规范中的意图*使用`<nav>`(例如)时，正如 HTML5 倡导者教导的那样，作为现有结构标记的替代，我们以一种非常真实的方式不必要地伤害了另一个少数群体。

## 哦...网页设计社区，发生了什么？

网页设计界对 HTML5 大肆宣传的最不幸的一点是，我们很快就忘记了优雅退化的传统。当然，我们不想局限于最小公分母。但是 IE8 离这还有很长的路要走，给那些禁用 JavaScript 的人一些更简单的东西和给他们一些简单的东西是有很大区别的。

让我澄清一下，如果*您的特定网站*需要 JavaScript，我没有问题(关闭 JavaScript 会以不同的方式破坏 IE6-8)，这是您明智的选择。但是我确实有一个问题，这个问题在 web 设计社区中几乎完全被忽略了，不知情的设计者和开发者给一小部分用户带来了不必要的痛苦。

光是这个问题就削弱了这些新元素的有用性，所以我建议坚持使用`<div>` s 作为结构，ARIA roles 作为可访问性。ARIA 角色至少可以帮助解决一个少数群体的可访问性问题，而不会破坏另一个群体的网站。

正如 http://lists.whatwg.org/·皮佩尔梅尔/whatwg-whatwg.org/ 2012 年 1 月/034506.html 所说的那样:

> 自然，如果你对
> 
> 的一切都满意，欢迎你继续这样做。

## 结论:R.I.P. HTML5 结构元素

也许最奇怪的是，我不确定规范编辑伊恩·希克森是否清楚这些新元素的用途，或者其他专家认为它们会有什么用途。

在与 Opera 的布鲁斯·劳森(2010 年《介绍 HTML5(新骑手)》的合著者)在 2009 年 WHATWG 名单([`lists.whatwg.org/·htdig.cgi/·whatwg-whatwg.org/ 2009 年 3 月/018888.html`](http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-March/018888.html))的交流中，劳森说(着重部分由作者标明):

> 毕竟，据我所知，还没有用户代理可以使用 time、section、footer、datagrid 等功能，但我们大多希望很快会有。

以下是希克森的回答:

> 我没有。大多数新元素只是为了使样式更简单，这样我们就不必使用类了。

这就是希克森的基本原理——不需要使用类——我们前面已经提到过了。但有趣的是，他并不期望用户代理会用它们做什么。他已经放弃了剖切和勾勒吗？这不就是为什么这些元素被放在第一位的原因吗(记住它们早于任何研究)，这不就是希克森在他编辑的规范中描述它们的方式吗？

这些元素是一个失败的原因。如果人们*仅仅使用这些元素而不是类(他们已经是了)，他们不会考虑他们将要创建的大纲。他们可能假设`<header>`创建了一个部分(它没有)，或者使用`<aside>`作为引用(并且在这样做的时候创建了一个新的部分)，这将意味着很多破碎的 HTML5 大纲。*

因此，用户代理(尤其是屏幕阅读器)将很少有动力使用 HTML5 大纲——这些元素的要点——作为导航手段，因为它们将会(并且已经)是一团乱麻。

很悲哀，不是吗？蒂姆·伯纳斯·李在 1991 年提出的分段愿望最终使它成为了一个可发布的 HTML 规范(在 XHTML 2.0 项目流产之后)，二十年后却遭到了误解和滥用。

这是之前的*我们考虑了规范中的歧义，事实上它们破坏了 IE6-8 中的样式，以及它们使*标记一个基本的 HTML 页面变得多么复杂，所有事情中的*。*

下面是约翰·奥尔索普(2009 年《用 Web 标准开发》的作者)在杰弗里·泽尔德曼的博客([`www.zeldman.com/ 2009/07/13/html-5-nav-ambiguity-resolved/# comment-44699`](http://www.zeldman.com/2009/07/13/html-5-nav-ambiguity-resolved/#comment-44699))上对新元素的评论:

> 当我深入研究规范时，将我的注意力主要集中在新的“语义”元素上，如 section、article、header、footer 等等，我发现了许多含糊不清、解释不清的特性，以及令人困惑的包容规则[以及]近乎拜占庭式的复杂性。
> 
> [...]最近，XHTML2 的死亡让很多人欢欣鼓舞。但是对 XHTML2 的许多合理批评也可以归咎于 HTML 5。和许多其他的，特别是规范本身也可以被拉平。是时候解决这些问题了。

我们有标记页面的解决方案:

*   对类使用`<div>`(和/或如果需要，在页面上出现一次的单个`id`)
*   使用适当的标题元素
*   适当添加 ARIA 地标，就大功告成了。

现在描述结构化标记就是这么简单。

HTML5 已经失去了这种简单性。

这是坏消息。好消息是，一切都还没完。我们可以借此机会尝试以更好的结构化方式使用标题，让盲人和视力受损的用户生活得更轻松一些(出于同样的原因，开始使用 ARIA 地标)。我们可以高兴地知道，我们现有的 HTML 结构标记技术将在未来许多年里很好地为我们服务。

让我最后说，尽管我批评 HTML5 规范的这一特定部分(以及 web 设计社区对它的支持)，如果没有伊恩·希克森和 WHATWG，就不会有我们今天所知的“html 5”——我们仍然可以等待 W3C 一起行动。我的目的不是恩将仇报——只是咬它的手指一点点。

接下来，我们来谈谈这个‘S’字:语义。**