# 1.JavaScript 简介

这些年来，avaScript 发生了很大变化。我们目前正处于一个 JavaScript 库的时代，你可以构建任何你想构建的东西。JavaScript 存在于客户机和服务器上，存在于桌面和移动设备上。

这本书的目的是帮助你理解语言是如何工作的，可以用它做什么，可用的资源，以及围绕语言和工具的一些生态系统。有时我会指出一些在技术面试中可能会被问到的问题，所有这些都是为了帮助你了解这个不断发展的社区。我将涉及的一些主题是

*   理解 JavaScript 语法和结构

*   创建易于理解和维护的脚本

*   使用工具调试 JavaScript

*   处理事件

*   JavaScript 如何在服务器上工作

*   使 JavaScript 成为强类型语言的框架

*   JavaScript 应用程序框架及其工作原理

*   从服务器检索数据

JavaScript 在现代 web 开发中是必不可少的；单页应用程序(spa)构成了大部分被创建的网站。理解 JavaScript 可以让你的网站增加交互性，并降低框架之类的东西的学习曲线。这并不是说你需要所有的框架，但是为了给你的网站增加任何层次的交互性，你需要 JavaScript。

足够的介绍——你已经通过这本书了解了 JavaScript，所以让我们在深入研究之前，先从较高的层面快速讨论一下 JavaScript。

在本章中，您将学习

*   为什么 JavaScript 对开发人员来说很重要

*   如何向 web 文档添加 JavaScript

*   与 JavaScript 相关的面向对象的编程(OOP)

您可能已经接触过 JavaScript，并且已经知道它是什么以及它能做什么，所以我将首先快速地介绍一下该语言的一些基础知识及其功能。如果你已经很了解 JavaScript，而你只是想了解更多更新、更容易理解的特性和概念，你可以跳过一个头。然而，可能有些信息你已经忘记了，稍微回顾一下也无妨。

## JavaScript 的原因

如前所述，JavaScript 无处不在。It 加上 HTML 和 CSS 都是你开发一个网站需要的工具。

您可以使用 JavaScript 在客户端和服务器端工作。这就使得对 JavaScript 开发者的要求非常高。对开发者来说，高需求意味着各种工作机会和有竞争力的价格。截至本文撰写之时，根据 Indeed，一家招聘网站( [`www.indeed.com/salaries/Javascript-Developer-Salaries`](http://www.indeed.com/salaries/Javascript-Developer-Salaries) )的数据，一名 JavaScript 开发人员在美国的平均年薪为 110841 美元。因此，JavaScript 不仅是一种值得研究的语言，它还是开发人员工具集的一个很好的补充。让我们快速讨论一下什么是 JavaScript，然后继续写一些代码。

## JavaScript 是什么？

JavaScript 是一种解释型脚本语言。宿主环境将提供对执行代码所需的所有对象的访问。

JavaScript 的主要例子是向网站添加交互性的能力。这是因为解释器被嵌入到网络浏览器中，所以你不需要添加任何软件。

这使得 JavaScript 成为一种易于使用的语言，因为你所需要的只是一个文本编辑器和一个浏览器。在客户端，您可以添加交互级别，如响应按钮点击和验证表单内容。它还允许您利用浏览器内置的 API(应用程序编程接口)。给你的网站增加地理定位功能就是一个例子。

另一个用例是使用 Node.js 这样的环境在服务器上执行 JavaScript。服务器端 JavaScript 的一个例子是能够从数据库发出请求、响应 HTTP 请求和创建文件。

本书的大部分内容将集中在客户端；然而，从代码的角度来看，差别很小。

## 网页中的 JavaScript 和基本语法

将 JavaScript 应用于 web 文档非常容易；你所需要做的就是使用`script`标签:

```js
<script>
  // Your code here
</script>

```

虽然这是向页面添加 JavaScript 的最简单方式，但不推荐这样做。这是内联 JavaScript 的一个例子。不采用这种方式建立网站的原因之一是，随着时间的推移，维护起来会变得很困难。想象一下，随着你的网站越来越大，保持一切井然有序是多么困难。

将 JavaScript 添加到 HTML 页面的首选方式是引用外部`.js`文件:

```js
<script src="js/myfile.js"></script>

```

### 注意

HTML 5 要求`script`标签有自己的结束标签。这将确保向后兼容旧的浏览器。此外，在结束标签`body`之前添加标签`script`被认为是最佳实践。

### JavaScript 语法

学习任何编程语言都与学习外语非常相似。有规则可循，这可能需要不同的思维方式。

编程中有很多问题需要解决。你花时间观察一种情况，并试图找出如何使用代码来解决问题。记住这一点，让我们从这个角度来讨论 JavaScript。

如果你想保留一条信息以备后用，这叫做*变量*。如果你还记得任何高中代数，总有一些例子，其中一个单词或字母代表一个值:

```js
5 + x = 10

```

在这个例子中，x 是一个代表数字的变量。使用 JavaScript，您可以声明一个变量并赋予它一个值，然后在以后使用它:

```js
var x = 5;
5 + x = 10;

```

上面的代码不是完美的 JavaScript，但是它说明了变量是如何工作的。第一行使用关键字`var`；这是语言内置的，只能在声明变量时使用。每行末尾都是分号，可以认为是句末的句号。JavaScript 解释器并不要求您拥有它。如果您没有添加分号，解释器将为您添加分号。为了更好地控制和阅读，建议您自己添加它们。

关键字`var`并不是声明变量的唯一方式。也可以使用其他关键字，如`let`和`const`。我将在第 3 章中讲述它们的不同之处以及何时应该使用其中一个。

另一种情况是当你有一些代码，你只想在需要的时候运行它。JavaScript 称之为*函数*。您可以编写一个函数，向其中添加您希望它执行的所有命令，然后让它等待，直到您需要它，就像这样:

```js
function doMath(num1, num2){
      let sum = num1 + num2;
      return sum;
}

```

这个示例函数的名称是`doMath`。这允许从代码的其他部分引用或调用该函数。这个函数也接受两个变量或参数，`sum1`和`sum2`。把它们看作你的函数的变量；它们只是表示函数正确执行所需的数据。在这种情况下，它是一组数字。

接下来是花括号({ })。它们包含您的代码块。你需要让这个函数工作的所有东西都在这里。您可以根据需要添加任意多行代码。一般来说，一个函数应该只执行一件事。以`doMath`为例，它只是把数字加在一起。如果你想让别的事情发生，应该写另一个函数。这将有助于调试过程。同样重要的是要注意，JavaScript 语言本身包含执行字符串操作和数学等任务的函数。

假设你想给自己留笔记。在这种情况下，您需要在代码中包含一些不会作为代码执行的内容。向代码中添加注释有两种方式:

```js
 // single line comment

*/
multi line
comment
/*

```

在调试代码时，添加多行注释也很有用。例如，如果您不想删除您拥有的内容，但又不想让代码执行，那么您可以将它设置为注释。

到目前为止，您已经知道了如何解决一些问题:如何保存数据、执行函数以及在代码中留下提醒。

现在让我们花点时间来讨论一下代码是如何在浏览器中执行的。

### 代码执行

浏览器从上到下读取页面，因此代码执行的顺序取决于脚本块的顺序。一个*脚本块*是`<script>`和`</script>`标签之间的代码；如果你有一个外部的`.js`文件，它也会从上到下读取。(还要注意，不只是浏览器能读懂你的代码；网站的用户也可以查看你的代码，所以你不应该在里面放任何秘密或敏感的东西。)下一个示例中有三个脚本块:

```js
<!DOCTYPE html>
<html>
    <head>
         <script type="text/javascript">
                alert("First script Block");
                alert("First script Block - Second Line");
          </script>
     </head>
     <body>
           <h1>Test Page</h1>
           <script type="text/javascript">
                 alert("Second script Block");
           </script>
    <p>Some more HTML</p>
          <script type="text/JavaScript">
                alert("Third script Block");
                function doSomething() {
                      alert("Function in Third script Block");
                }
          </script>
        </body>
</html>

```

如果您尝试一下，您会看到第一个脚本块中的`alert()`对话框出现并显示消息

```js
First script Block

```

接下来是第二行显示消息的下一个`alert()`对话框

```js
First script Block - Second Line.

```

解释器继续向下，来到第二个脚本块，这里显示了`alert()`函数

```js
Second script Block

```

第三个脚本块跟在它后面，显示一个`alert()`语句

```js
Third script Block

```

尽管函数内部还有另一个`alert`语句，但它并不执行和显示消息。这是因为它在函数定义(`function doSomething()`)中，函数中的代码只有在函数被调用时才会执行。

到目前为止，在本章中，您已经了解了 JavaScript 语言，看到了一些语法规则，了解了该语言的一些主要组成部分(尽管很简单)，并运行了一些 JavaScript 脚本。你已经走了相当长的距离。在接下来的两节中更详细地研究 JavaScript 语言之前，让我们先来探索 JavaScript 语言的重要部分:*函数*和*对象。*

## 功能

在上一节中，您看到了一些在您明确请求之前不会执行的代码。JavaScript 中的函数非常灵活。它们可以赋给变量，并作为参数作为属性传递给其他函数。函数也可以返回另一个函数。让我们来看几个例子:

```js
var doMath = function(num1, num2) {
        var result = num1 + num2;
         return result;
};

var myResult = doMath(2,3);

```

这个例子说明了如何将一个函数直接赋给一个变量，然后用这个变量调用这个函数。这个函数接受两个数字作为参数。当数字被传递给函数时，它们被加在一起，结果被返回给调用该函数的代码:

```js
function message() {
      return 'It's. the information age ';
}

function displayMessage(msgFunction, person){
   consoe.log(msgFunction() + person) //It’s the information age brother!
}

displayMessage(message, "brother!");

```

此示例将一个函数传递给另一个函数。第二个函数接收一个函数作为参数，然后在一个`log`命令中执行该函数。这个最初被称为`message`的函数返回一个字符串，该字符串将显示在同样在`console.log`方法中传递的字符串旁边。

函数是 JavaScript 语言中非常重要的一部分，我将在第 [5](05.html) 章中详细介绍它们。

我将在这里介绍的另一个概念是对象的概念。我还将在第四章[中更详细地讲述对象。](04.html)

## 目标

对象是 JavaScript 使用方式的核心。在许多方面，JavaScript 中的对象就像编程之外的世界中的对象。(确实存在；我只是看了一下。)在现实世界中，一个对象只是一个“东西”(很多关于面向对象编程的书把对象比作名词):一辆车，一张桌子，一把椅子，还有我正在敲的键盘。对象有

*   **属性** **s** (类比形容词):车是*红色*。

*   **方法** **s** (类似句子中的动词):发动汽车的方法可能是*转动点火钥匙*。

*   **事件** **:** 转动点火钥匙导致*汽车启动*事件。

面向对象编程试图通过模拟现实世界的对象来简化编程。假设您正在创建一个汽车模拟器。首先，创建一个汽车对象，赋予它类似于*颜色*和*当前速度*的属性。然后你需要创建方法:也许一个 *start* 方法来启动汽车，一个 *brake* 方法来减速汽车，你需要向其中传递关于刹车应该压得多紧的信息，以便你可以确定减速效果。最后，你需要知道你的车什么时候出了问题。在 OOP 中，这被称为*事件*。例如，当油箱油量不足时，汽车会发出通知(仪表盘上的灯)让你知道该加油了。在这段代码中，您将监听这样一个事件，以便您可以对此采取一些措施。

面向对象编程使用这些概念。这种设计软件的方式现在非常普遍，并且影响了编程的许多领域——但是对你来说最重要的是，它是 JavaScript 编程的核心。

您将使用的一些对象是语言规范的一部分:例如，`String`对象、`Date`对象和`Math`对象。这些对象提供了许多有用的功能，可以节省您大量的编程时间。例如，您可以使用`Date`对象从客户端(比如用户的设备)获取当前日期和时间。它存储日期并提供许多有用的与日期相关的功能，例如将日期/时间从一个时区转换到另一个时区。这些对象通常被称为*核心对象*，因为它们独立于实现。浏览器还可以通过对象进行编程，您可以使用这些对象来获取有关浏览器的信息并更改应用程序的外观。例如，浏览器提供了`Document`对象，它代表 JavaScript 可用的网页。您可以在 JavaScript 中使用它来向 web 浏览器的用户正在查看的 web 页面添加新的 HTML。如果您在不同的主机上使用 JavaScript，例如 Node.js 服务器，您会发现托管 JavaScript 的服务器公开了一组非常不同的主机对象，因为它们的功能与您想在 web 服务器上做的事情有关。

### 注意

尽管本节从面向对象的角度介绍了 JavaScript，但该语言本身是一种多范式语言，您可以将它用作函数式、命令式或事件驱动语言。

随着本书的深入，您将更深入地了解对象:JavaScript 语言的核心对象、浏览器使用 JavaScript 访问和操作的对象，以及您自己的自定义对象。不过现在，你只需要知道 JavaScript 中的对象是可以用来给网页添加功能的实体*和*，并且它们可以有属性和方法。例如，`Math`对象在其属性中有一个表示 pi 值的属性，在其方法中有一个生成随机数的属性。

## 摘要

在这一章中，你学习了高级的 JavaScript。您了解了为什么 JavaScript 是开发人员工具箱中的一个好工具。您还学习了一些基本语法以及如何向代码中添加注释。您看到了如何使用变量保存数据以备后用，以及如何使用函数按需准备代码。另一个主题是代码执行(浏览器如何从上到下读取代码)。最大的部分是对对象的讨论。如果您打算在客户机或服务器上使用 JavaScript，理解对象是 JavaScript 的核心是很重要的。

接下来，作为一名 JavaScript 开发人员，您将看到一些可用的工具。